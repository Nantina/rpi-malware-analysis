#!/bin/bash

# Define the base URL for the Flask app
BASE_URL="http://127.0.0.1:5000"

# Infinite loop to repeat commands indefinitely
while true
do
    # 1. User Registration and Login

    # Registering a new user
    curl -X POST -H "Content-Type: application/json" -d '{"username": "user1", "password": "pass123"}' $BASE_URL/register
    echo -e "\n"

    # Registering another user
    curl -X POST -H "Content-Type: application/json" -d '{"username": "user2", "password": "password456"}' $BASE_URL/register
    echo -e "\n"

    # Attempting to log in as user1
    curl -X POST -H "Content-Type: application/json" -d '{"username": "user1", "password": "pass123"}' $BASE_URL/login
    echo -e "\n"

    # Attempting to log in with wrong credentials
    curl -X POST -H "Content-Type: application/json" -d '{"username": "user2", "password": "wrongpassword"}' $BASE_URL/login
    echo -e "\n"

    # 2. Simple Calculator

    # Performing addition of 15 and 30
    curl "$BASE_URL/calculator?operation=add&num1=15&num2=30"
    echo -e "\n"

    # Performing subtraction of 50 and 20
    curl "$BASE_URL/calculator?operation=subtract&num1=50&num2=20"
    echo -e "\n"

    # Performing multiplication of 7 and 8
    curl "$BASE_URL/calculator?operation=multiply&num1=7&num2=8"
    echo -e "\n"

    # Performing division of 100 and 4
    curl "$BASE_URL/calculator?operation=divide&num1=100&num2=4"
    echo -e "\n"

    # 3. Simple To-Do List

    # Adding a task: 'Complete Flask project'
    curl -X POST -H "Content-Type: application/json" -d '{"task": "Complete Flask project"}' $BASE_URL/add_task
    echo -e "\n"

    # Adding another task: 'Write documentation'
    curl -X POST -H "Content-Type: application/json" -d '{"task": "Write documentation"}' $BASE_URL/add_task
    echo -e "\n"

    # Adding another task: 'Submit assignment'
    curl -X POST -H "Content-Type: application/json" -d '{"task": "Submit assignment"}' $BASE_URL/add_task
    echo -e "\n"

    # Viewing all tasks
    curl $BASE_URL/tasks
    echo -e "\n"

    sleep 5
done